# ì˜ˆì‹œ ì½”ë“œ

```tsx
<script lang="ts">
import { defineComponent, reactive, onMounted } from 'vue';
import { Type1, Type2 } from '../types';
import A from './A.vue';

export default defineComponent({
  name: 'B',
  components: {
    A,
  },
  setup() {
    const state = reactive({
      obj: { ... } as Type1,
      arr: [] as Type2[],
    });
    const onClick = () => { ... };
    onMounted(() => {
      state.arr.filter((i: Type2) => i.flag === false);
    });

    return {
      ...toRefs(state),
      onClick,
    };
  },
});
</script>
```

# ì‚¬ìš© ë°©ë²•

## 1. ê°œë°œ ì–¸ì–´ ì†ì„± ëª…ì‹œ

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©ì‹œ ëª…ì‹œ í•„ìš”

```tsx
<script lang="ts">...</script>
```

## 2. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë³´ëŠ” ìƒˆë¡œìš´ íƒ€ì…ë“¤ (ê¸°ë³¸ ì™¸)

- íƒ€ì…ì²´í‚¹ì— ëŒ€í•œ íŒŒì¼ì€ `node_modules\vuex\types\index.d.ts` íŒŒì¼ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.
- íƒ€ì…
  1. any : ê¸°ë³¸ì ìœ¼ë¡œ íƒ€ì… ì²´í‚¹ì„ í•˜ì§€ ì•ŠëŠ” ê²ƒê³¼ ê°™ìŒ (ê¶Œê³ í•˜ì§€ ì•ŠìŒ)
  2. type : íƒ€ì…ì´ ëª…ì‹œë˜ì–´ ìˆëŠ” ê³ ì •ëœ ìˆ˜ì˜ ìš”ì†Œë¥¼ í¬í•¨í•œ íƒ€ì… ë°°ì—´ì„ ì •ì˜
  3. enum : numbericê°’ë“¤ì„ ìµìˆ™í•œ ë„¤ì„ìœ¼ë¡œ ì •ì˜ í•  ìˆ˜ ìˆë‹¤.
  ì´ ì™¸ì˜ ê²ƒë“¤ì€ ì•„ë˜ í˜ì´ì§€ ì°¸ê³ 
  [Documentation - Everyday Types](https://www.typescriptlang.org/docs/handbook/basic-types.html)
  [[TypeScript] íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì‹œì‘í•˜ê¸°](https://hasudoki.tistory.com/entry/TypeScript-%ED%83%80%EC%9E%85%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0)
  [íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•´ì£¼ëŠ” ìœ í‹¸ íƒ€ì…](https://blog.martinwork.co.kr/typescript/2019/05/28/typescript-util-types.html)

## 3. Vue3 Composition API

### 1) setup

- `setup`ì´ ì‹¤í–‰ë  ë•Œ, ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ì•„ì§ ìƒì„±ë˜ì§€ì•Šì•„Â `setup`ì˜µì…˜ ë‚´ì—Â `this`ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰,Â `props`ë¥¼ ì œì™¸í•˜ê³ , ì»´í¬ë„ŒíŠ¸ ë‚´ ë‹¤ë¥¸ ì†ì„±ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ â€“Â **local state**,Â **computedproperties** ë˜ëŠ”Â **methods**
- `setup(props, context) { ... }`ì˜ í˜•íƒœë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì„ íƒì‚¬í•­ì´ë©°, ì»´í¬ë„ŒíŠ¸ê°€ ìƒì„±ë˜ê¸° ì „ì— í•„ìš”í•œ ê²ƒë“¤ì„ ì„¸íŒ…í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
- setup()ì€ Vue 2ì˜ ë¼ì´í”„ì‚¬ì´í´ í›…ê³¼ ë¹„êµí•˜ë©´ beforeCreateì™€ created í›… ì‚¬ì´ì— ë¶ˆë ¤ì§„ë‹¤.
- ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì™€ ë‹¬ë¦¬ thisì— ì ‘ê·¼ì´ ë¶ˆê°€í•˜ë‹¤. ê·¸ë¡œì¸í•´Â `this.[??]`Â ì½”ë“œê°€ data ì˜µì…˜ì˜ ë³€ìˆ˜ì¸ì§€ computedì¸ì§€ ì½”ë“œë§Œ ë³´ê³  í—·ê°ˆë¦¬ëŠ” í˜„ìƒì´ ì—†ì–´ì¡Œë‹¤.
- ì²«ë²ˆì§¸ ì „ë‹¬ì¸ìë¡œ propsê°€ ë‘ë²ˆì§¸ ì „ë‹¬ì¸ìë¡œëŠ” contextê°€ ì¡´ì¬í•œë‹¤. í•„ìš”ì— ë”°ë¼ contextë¥¼ destructringí•˜ì—¬ attr, slots, parent, root, emit ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- data, methods ì˜µì…˜ê³¼ ë”ë¶ˆì–´ ë¼ì´í”„ì‚¬ì´í´ í›…ë„ setup() ë‚´ë¶€ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
- setup() ë‚´ë¶€ì—ì„œ ì •ì˜í•œ ê°ì²´ë“¤ì„ ë°˜í™˜í•˜ë©´ ì†ì„±ë“¤ì€ í…œí”Œë¦¿ì˜ì—­ì˜ ë Œë” ì»¨í…ìŠ¤íŠ¸ì— ë³‘í•©ë˜ì–´ ë Œë”ë§ì— ì˜í–¥ì„ ë¯¸ì¹˜ê²Œ ëœë‹¤.
- Vue 2ì˜ optionë“¤ì´ 1depth-hierarchy êµ¬ì¡°ì™€ ë‹¬ë¦¬ Vue 3ì—ì„œ setup()ë¡œ ì¸í•´ hierarchy êµ¬ì¡°ê°€ ë‹¬ë¼ì¡Œë‹¤.

### 2) reactive() vs. ref()

- ëŒ€í‘œì ì¸ ë°˜ì‘ì„± ë°©ì‹ 2ê°€ì§€ëŠ” reactive, refì´ë‹¤.
- reactive()ì˜ íŒŒë¼ë¯¸í„°ëŠ” ì˜¤ì§ ê°ì²´ë§Œ ë°›ìœ¼ë©°, ë°˜í™˜ ê²°ê³¼ë¡œëŠ” ì¸ìë¡œ ë°›ì€ ê°ì²´ì™€ ë™ì¼í•œ ë°˜ì‘í˜• ê°ì²´ë¡œì„œ ì›ë³¸ ê°ì²´ ë‚´ë¶€ì— Vue ì˜µì €ë²„ë§Œ ì¶”ê°€í•˜ì—¬ ê·¸ëŒ€ë¡œ ë°˜í™˜í•œë‹¤. Proxyë¡œ ë°˜ì‘í˜•ì´ êµ¬í˜„ë˜ì–´ìˆì–´ ìƒˆë¡œìš´ ì†ì„±ì„ ì¶”ê°€, ì‚­ì œí•˜ë”ë¼ë„ ê°ì§€ê°€ ê°€ëŠ¥í•˜ë©°, ì¤‘ì²©ëœ ê°ì²´ë¼ë„ ê¹Šì€ ê°ì§€ê°€ ê°€ëŠ¥í•˜ì—¬ ë°˜ì‘ì„±ì´ ìœ ì§€ëœë‹¤. Vue 2ì˜ Vue.Observable APIì™€ ë™ì¼í•˜ë‹¤.
- ref()ëŠ” ê°ì²´ë¥¼ í¬í•¨í•œ primitive íƒ€ì…ì„ ë°›ì„ ìˆ˜ ìˆìœ¼ë©°, ë°˜ì‘ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ê°ì‹¼ .value ì†ì„±ì„ ê°€ì§„ ê°€ë³€ì°¸ì¡°ê°ì²´ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— ê°’ì„ ìº¡ìŠí™”í•œ ê²°ê³¼ë¡œ ë‚˜ì˜¨ë‹¤. template ìƒì˜ refì™€ ref()ê°€ í†µí•©ë˜ì–´ ì£¼ë¡œ onMounted í›…ì—ì„œ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### 3) method, computed, watch

- method : setup() ë‚´ë¶€ì—ì„œ í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³  ë¦¬í„´í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•œ ë‹¤ìŒ í…œí”Œë¦¿ ìƒì—ì„œ ì‚¬ìš©í•œë‹¤.
- computed : setup() ë‚´ë¶€ì—ì„œ ì˜µì…˜ ë°©ì‹ì´ ì•„ë‹Œ computed() ë‚´ ìµëª…í•¨ìˆ˜ë¡œ ì‘ì„±í•˜ê³  ë¦¬í„´í•˜ì—¬ ì‚¬ìš©. computed ë‚´ë¶€ëŠ” refë¡œ ì´ë£¨ì–´ì ¸ìˆì–´ .valueë¥¼ í†µí•´ ê°’ì„ ì ‘ê·¼í•œë‹¤.
- watch : ì²«ë²ˆì§¸ ì¸ìë¡œëŠ” ê°ì‹œí•  ëŒ€ìƒ, ë‘ë²ˆì§¸ëŠ” í˜„ì¬ê°’, ì´ì „ê°’ì„ ì•Œ ìˆ˜ ìˆëŠ” ì½œë°±, ì„¸ë²ˆì§¸ëŠ” ê°ì‹œì˜µì…˜ì„ ë„£ì–´ ì‚¬ìš©í•œë‹¤.

[https://github.com/vuejs/composition-api](https://github.com/vuejs/composition-api)

# ì¶”ê°€ ì½”ë“œ ì‘ì„±ì‹œ ì£¼ì˜ì‚¬í•­

## 1. \***\*Vue ì´ë²¤íŠ¸ ë²„ìŠ¤ ì‚¬ìš©ì„ í”¼í•œë‹¤.\*\***

ì´ íŒ¨í„´ì€ ë‹¨ìˆœí•œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œÂ `$dispatch`ì™€Â `$broadcast`ë¥¼ ëŒ€ì²´ í•  ìˆ˜ ìˆì§€ë§Œ, ë” ë³µì¡í•œ ê²½ìš°ì—ëŠ” Vuexì™€ ê°™ì€ ì „ìš© ìƒíƒœ ê´€ë¦¬ ë ˆì´ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

ì´ë²¤íŠ¸ ë²„ìŠ¤ ê°œë…ì´ í”„ë¡œê·¸ë˜ë°ì—ì„œ í”íˆ ì“°ì´ëŠ” ë°œí–‰-êµ¬ë…(publish-subscribe) íŒ¨í„´ì´ê¸° ë•Œë¬¸ì— ì•„ì§ì€Â [mitt](https://github.com/developit/mitt)ì™€ ê°™ì€ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ ì´ ê°œë…ì„ ì‚¬ìš©í•´ë„ ë¬´ê´€í•˜ë‹¤. ğŸ˜‰

```jsx
// ì´ë²¤íŠ¸ ë²„ìŠ¤ ì˜ˆì‹œ (Vue 2)
import Vue from "vue";
const eventBus = new Vue();

// êµ¬ë…
eventBus.$on("sandwich-made", () => console.log("sandwich made!"));

// ë°œí–‰
eventBus.$emit("sandwich-made");
// ì¨ë“œ íŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬(ex. mitt)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬íŒ©í† ë§
import mitt from "mitt";
const eventBus = mitt();

// êµ¬ë…
eventBus.on("sandwich-made", () => console.log("sandwich made!"));

// ë°œí–‰
eventBus.emit("sandwich-made");
```

## 2. Filter í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

Vue2ì—ì„œ ì‚¬ìš©í•˜ë˜ Filterí•¨ìˆ˜ ì‚¬ìš©ë²•ì€ Method ì•ˆì—ì„œ ì‘ì„±í•œë‹¤.

```jsx
// ì „: filter ì‚¬ìš©
{
  filter: {
    toCurrency (value) {
      return `$${value.toFixed(2)}`
    }
  }
}

// í›„: method ì‚¬ìš©
{
  methods: {
    toCurrency (value) {
      return `$${value.toFixed(2)}`
    }
  }
}
```
